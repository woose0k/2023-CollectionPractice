CREATE TABLE TBL_CATEGORY(
    TYPE_CODE NUMBER,
    TYPE_NAME VARCHAR2(30) NOT NULL,
    REF_TYPE_CODE NUMBER,
    CONSTRAINT PK_TYPE_CODE PRIMARY KEY(TYPE_CODE),
    CONSTRAINT FK_REF_TYPE_CODE FOREIGN KEY(REF_TYPE_CODE) REFERENCES TBL_CATEGORY(TYPE_CODE)
    );

COMMENT ON COLUMN TBL_CATEGORY.TYPE_CODE IS '속성번호';
COMMENT ON COLUMN TBL_CATEGORY.TYPE_NAME IS '속성이름';

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  1
, '물'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  2
, '불'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  3
, '풀'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  4
, '전기'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  5
, '노말'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  6
, '드래곤'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  7
, '격투'
, ''
);

INSERT
  INTO TBL_CATEGORY
(
  TYPE_CODE
, TYPE_NAME
, REF_TYPE_CODE
)
VALUES
(
  8
, '기타'
, ''
);

CREATE TABLE TBL_POKEBOX(
    POKEMON_NO NUMBER,
    POKEMON_NAME VARCHAR2(30) DEFAULT 'UNKNOWN',
    TYPE_CODE NUMBER,
    EVOLVEABLE_STATUS CHAR CHECK(EVOLVEABLE_STATUS IN ('Y', 'N')),
    CONSTRAINT PK_POKEMON_NO PRIMARY KEY(POKEMON_NO),
    CONSTRAINT FK_TYPE_CODE FOREIGN KEY(TYPE_CODE) REFERENCES TBL_CATEGORY(TYPE_CODE)
    );

COMMENT ON COLUMN TBL_POKEBOX.POKEMON_NO IS '포켓몬번호';
COMMENT ON COLUMN TBL_POKEBOX.POKEMON_NAME IS '포켓몬이름';
COMMENT ON COLUMN TBL_POKEBOX.TYPE_CODE IS '속성번호';
COMMENT ON COLUMN TBL_POKEBOX.EVOLVEABLE_STATUS IS '진화가능여부';

CREATE SEQUENCE SEQ_POKEMON_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '잠만보'
, 5
, 'N'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '피카츄'
, 4
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '파이리'
, 2
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '꼬부기'
, 1
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '이상해씨'
, 3
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '홍수몬'
, 7
, 'N'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '미뇽'
, 6
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '팽도리'
, 1
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '알통몬'
, 7
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '치코리타'
, 3
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '브케인'
, 2
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '리아코'
, 1
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '꼬렛'
, 5
, 'Y'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '안농'
, 8
, 'N'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, ''
, 8
, 'N'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '메타몽'
, 8
, 'N'
);

INSERT
  INTO TBL_POKEBOX
(
  POKEMON_NO
, POKEMON_NAME
, TYPE_CODE
, EVOLVEABLE_STATUS
)
VALUES
(
  SEQ_POKEMON_NO.NEXTVAL
, '모부기'
, 3
, 'Y'
);

select
a.type_code
, a.type_name
, b.pokemon_no
, b.pokemon_name
from tbl_category a
join tbl_pokebox b on (a.type_code = b.type_code)
where a.type_name = '물';




